extends index

block styles
    link(rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css")

block content
    div(class="py-5")
        h1(class="text-center text-4xl font-extrabold") Home 
        
        //- Map that shows houses
        h4(class="py-10 text-center text-2xl") Map of houses 
        
        div(class="flex flex-col md:flex-row items-center gap-4")
            h2(class="text-sm uppercase text-gray-800 font-bold") Filters
            
            //- Filter by category
            div(class="w-full md:w-auto flex items-center gap-2")
                label(for="category" class="text-sm w-24 uppercase text-gray font-bold") Category
                select(id="category" class="flex-1 bg-white w-full px-3 py-2 border-gray-300 rounded-md shadow")
                    option(value="") - Select -
                    each category in categories 
                        option(value=category.id)= category.name
            
            //- Filter by price
            div(class="w-full md:w-auto flex items-center gap-2")
                label(for="price" class="text-sm w-24 uppercase text-gray font-bold") Price
                select(id="price" class="flex-1 bg-white w-full px-3 py-2 border-gray-300 rounded-md shadow")
                    option(value="") - Select -
                    each price in prices 
                        option(value=price.id)= price.name
        
        div(id="map" class="h-[600px] mt-5")
        
        //- Idea: make each view of properties [Visibility toggleable] and save the state
        section(class="py-5")
            h2(class="text-center text-4xl font-extrabold pt-10") List 
            
            //- pre= JSON.stringify(properties, undefined, 4)
            
            div(class="grid grid-cols-1 md:grid-cols-3 gap-5 mt-14")
                each property in properties
                    div(class="bg-white shadow rounded-lg")
                        img(class="object-cover h-72 w-full" id=`grid_property_image_${property.id}` alt=`House ${property.title}`)
                        div(class="p-5 space-y-2")
                            //- Property data
                            h3(class="text-2xl")= property.title
                            
                            //- pre= JSON.stringify(property, undefined, 4)
                            
                            p(class="text-sm text-gray-600") House type  
                                span(class="text-gray-800 font-bold")= property["category.name"]
                            
                            p(class="text-sm text-gray-600") Rooms 
                                span(class="text-gray-800 font-bold")= property.rooms
                            
                            p(class="text-sm text-gray-600") Bathrooms 
                                span(class="text-gray-800 font-bold")= property.bathrooms
                            
                            p(class="text-sm text-gray-600") Price 
                                span(class="text-gray-800 font-bold")= property["price.name"]
                            
                            a(href=`/property/view/${property.id}` class="bg-green-600 w-full text-center block font-bold text-white p-2 uppercase rounded" target="_blank") Go to property

block scripts
    //- Leaflet
    script(
        src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""
    )
    
    //- For locating the street
    <script src="https://unpkg.com/leaflet-geosearch@3.0.0/dist/geosearch.umd.js"></script>
    
    script(src="/js/routes/home.js")
